language: node_js
dist: trusty
sudo: false

node_js:
  - '8.9.4'

addons:
  chrome: stable
  firefox: latest

branches:
  only:
  - master

jobs:
  include:
    - env: "MODE=saucelabs_required"
    - env: "MODE=browserstack_required"
env:
  global:
  - LOGS_DIR=/tmp/flex-layout-build/logs
  - SAUCE_USERNAME=angular-ci
  - BROWSER_STACK_USERNAME=adamplumer1
  - BROWSER_STACK_ACCESS_KEY=WgLjxoB2zQ3tqmsznKnz
  - BROWSER_PROVIDER_READY_FILE=/tmp/flex-layout-build/readyfile
  - BROWSER_PROVIDER_ERROR_FILE=/tmp/flex-layout-build/errorfile


before_install:
  - source ./scripts/ci/env.sh

install:
  - npm install

before_script:
  - mkdir -p $LOGS_DIR

script:
  - ./scripts/ci/travis-script.sh

cache:
  directories:
    - ./node_modules/
