{"version":3,"file":"layout-align.js","sourceRoot":"","sources":["layout-align.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Renderer,\n  SimpleChanges, Self,\n} from '@angular/core';\nimport {Subscription} from 'rxjs/Subscription';\nimport {extendObject} from '../../utils/object-extend';\n\nimport {BaseFxDirective} from './base';\nimport {MediaChange} from '../../media-query/media-change';\nimport {MediaMonitor} from '../../media-query/media-monitor';\n\nimport {LAYOUT_VALUES, LayoutDirective} from './layout';\n\n\n/**\n * 'layout-align' flexbox styling directive\n *  Defines positioning of child elements along main and cross axis in a layout container\n *  Optional values: {main-axis} values or {main-axis cross-axis} value pairs\n *\n *  @see https://css-tricks.com/almanac/properties/j/justify-content/\n *  @see https://css-tricks.com/almanac/properties/a/align-items/\n *  @see https://css-tricks.com/almanac/properties/a/align-content/\n */\n\nexport class LayoutAlignDirective extends BaseFxDirective implements OnInit, OnChanges, OnDestroy {\n\n  private _layout = 'row';  // default flex-direction\n  private _layoutWatcher: Subscription;\n\n         set align(val)     { this._cacheInput('align', val); }\n      set alignXs(val)   { this._cacheInput('alignXs', val); }\n   set alignGtXs(val) { this._cacheInput('alignGtXs', val); };\n      set alignSm(val)   { this._cacheInput('alignSm', val); };\n   set alignGtSm(val) { this._cacheInput('alignGtSm', val); };\n      set alignMd(val)   { this._cacheInput('alignMd', val); };\n   set alignGtMd(val) { this._cacheInput('alignGtMd', val); };\n      set alignLg(val)   { this._cacheInput('alignLg', val); };\n   set alignGtLg(val) { this._cacheInput('alignGtLg', val); };\n      set alignXl(val)   { this._cacheInput('alignXl', val); };\n\n\n  constructor(\n      monitor : MediaMonitor,\n      elRef: ElementRef, renderer: Renderer,\n        container: LayoutDirective)\n  {\n    super(monitor, elRef, renderer);\n\n    if (container) {  // Subscribe to layout direction changes\n      this._layoutWatcher = container.layout$.subscribe(this._onLayoutChange.bind(this));\n    }\n  }\n\n  // *********************************************\n  // Lifecycle Methods\n  // *********************************************\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['align'] != null || this._mqActivation) {\n      this._updateWithValue();\n    }\n  }\n\n  /**\n   * After the initial onChanges, build an mqActivation object that bridges\n   * mql change events to onMediaQueryChange handlers\n   */\n  ngOnInit() {\n    this._listenForMediaQueryChanges('align', 'start stretch', (changes: MediaChange) =>{\n      this._updateWithValue(changes.value);\n    });\n    this._updateWithValue();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    if ( this._layoutWatcher ) {\n      this._layoutWatcher.unsubscribe();\n    }\n  }\n\n  // *********************************************\n  // Protected methods\n  // *********************************************\n\n  /**\n   *\n   */\n  private _updateWithValue(value?: string) {\n    value = value || this._queryInput(\"align\") || 'start stretch';\n    if (this._mqActivation) {\n      value = this._mqActivation.activatedInput;\n    }\n\n    this._applyStyleToElement(this._buildCSS(value));\n    this._allowStretching(value, !this._layout ? \"row\" : this._layout);\n  }\n\n  /**\n   * Cache the parent container 'flex-direction' and update the 'flex' styles\n   */\n  private _onLayoutChange(direction) {\n    this._layout = (direction || '').toLowerCase().replace('-reverse', '');\n    if (!LAYOUT_VALUES.find(x => x === this._layout))\n      this._layout = 'row';\n\n    let value = this._queryInput(\"align\") || 'start stretch';\n    if (this._mqActivation) {\n      value = this._mqActivation.activatedInput;\n    }\n    this._allowStretching(value, this._layout || \"row\");\n  }\n\n  private _buildCSS(align) {\n    let css = {}, [main_axis, cross_axis] = align.split(' ');\n\n    css['justify-content'] = 'flex-start';  // default main axis\n    css['align-items'] = 'stretch';         // default cross axis\n    css['align-content'] = 'stretch';       // default cross axis\n\n    // Main axis\n    switch (main_axis) {\n      case 'center':\n        css['justify-content'] = 'center';\n        break;\n      case 'space-around':\n        css['justify-content'] = 'space-around';\n        break;\n      case 'space-between':\n        css['justify-content'] = 'space-between';\n        break;\n      case 'end':\n        css['justify-content'] = 'flex-end';\n        break;\n    }\n    // Cross-axis\n    switch (cross_axis) {\n      case 'start':\n        css['align-items'] = css['align-content'] = 'flex-start';\n        break;\n      case 'baseline':\n        css['align-items'] = 'baseline';\n        break;\n      case 'center':\n        css['align-items'] = css['align-content'] = 'center';\n        break;\n      case 'end':\n        css['align-items'] = css['align-content'] = 'flex-end';\n        break;\n      default : // 'stretch'\n        break;\n    }\n\n    return extendObject(css, {\n      'display' : 'flex',\n      'flex-direction' : this._layout || \"row\",\n      'box-sizing' : 'border-box'\n    });\n  }\n\n\n  /**\n   * Update container element to 'stretch' as needed...\n   * NOTE: this is only done if the crossAxis is explicitly set to 'stretch'\n   */\n  private _allowStretching(align, layout) {\n    let [, cross_axis] = align.split(' ');\n\n    if (cross_axis == 'stretch') {\n      // Use `null` values to remove style\n      this._applyStyleToElement({\n        'box-sizing': 'border-box',\n        'max-width': (layout === 'column') ? '100%' : null,\n        'max-height': (layout === 'row') ? '100%' : null\n      });\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{selector: `\n  [fxLayoutAlign],\n  [fxLayoutAlign.xs]\n  [fxLayoutAlign.gt-xs],\n  [fxLayoutAlign.sm],\n  [fxLayoutAlign.gt-sm]\n  [fxLayoutAlign.md],\n  [fxLayoutAlign.gt-md]\n  [fxLayoutAlign.lg],\n  [fxLayoutAlign.gt-lg],\n  [fxLayoutAlign.xl]\n`}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: MediaMonitor, },\n{type: ElementRef, },\n{type: Renderer, },\n{type: LayoutDirective, decorators: [{ type: Optional }, { type: Self }, ]},\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'align': [{ type: Input, args: ['fxLayoutAlign', ] },],\n'alignXs': [{ type: Input, args: ['fxLayoutAlign.xs', ] },],\n'alignGtXs': [{ type: Input, args: ['fxLayoutAlign.gt-xs', ] },],\n'alignSm': [{ type: Input, args: ['fxLayoutAlign.sm', ] },],\n'alignGtSm': [{ type: Input, args: ['fxLayoutAlign.gt-sm', ] },],\n'alignMd': [{ type: Input, args: ['fxLayoutAlign.md', ] },],\n'alignGtMd': [{ type: Input, args: ['fxLayoutAlign.gt-md', ] },],\n'alignLg': [{ type: Input, args: ['fxLayoutAlign.lg', ] },],\n'alignGtLg': [{ type: Input, args: ['fxLayoutAlign.gt-lg', ] },],\n'alignXl': [{ type: Input, args: ['fxLayoutAlign.xl', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}